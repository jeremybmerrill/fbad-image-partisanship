(this["webpackJsonpreact-ml-app"]=this["webpackJsonpreact-ml-app"]||[]).push([[0],{51:function(e,a,t){e.exports=t.p+"static/media/image_partisanship.79fad1aa.onnx"},63:function(e,a,t){e.exports=t(84)},7:function(e,a,t){"use strict";(function(e){t.d(a,"c",(function(){return f})),t.d(a,"b",(function(){return h})),t.d(a,"e",(function(){return g})),t.d(a,"d",(function(){return v})),t.d(a,"f",(function(){return E})),t.d(a,"a",(function(){return j}));var n=t(11),r=t.n(n),c=t(50),o=t.n(c),i=t(38),l=t(43),s=t.n(l),u=t(12),m=t.n(u),d=t(51),p=t.n(d),f=256,h=function(e){return e.split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")},g=function(){return new i.InferenceSession({backendHint:"webgl"})};function b(e){var a,t,n,c;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:for(t=(a=[1,3,f,f]).reduce((function(e,a){return e*a})),n=new i.Tensor(new Float32Array(t),"float32",a),c=0;c<t;c++)n.data[c]=2*Math.random()-1;return o.next=6,r.a.awrap(e.run([n]));case 6:case"end":return o.stop()}}))}function v(e){return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(e.loadModel(p.a));case 2:return a.next=4,r.a.awrap(b(e));case 4:case"end":return a.stop()}}))}function E(e,a,t){setTimeout((function(){return function(e,a,t){var n,c,o,l,s;return r.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return n=a.width,c=a.height,o=w(a),l=new i.Tensor(o,"float32",[1,3,n,c]),u.next=5,r.a.awrap(e.run([l]));case 5:s=u.sent,t(s);case 7:case"end":return u.stop()}}))}(e,a,t)}),10)}var w=function(e){var a=e.data,t=e.width,n=e.height,r=s()(new Float32Array(a),[t,n,4]),c=s()(new Float32Array(t*n*3),[1,3,t,n]);return m.a.assign(c.pick(0,0,null,null),r.pick(null,null,0)),m.a.assign(c.pick(0,1,null,null),r.pick(null,null,1)),m.a.assign(c.pick(0,2,null,null),r.pick(null,null,2)),m.a.divseq(c,255),m.a.subseq(c.pick(0,0,null,null),.485),m.a.subseq(c.pick(0,1,null,null),.456),m.a.subseq(c.pick(0,2,null,null),.406),m.a.divseq(c.pick(0,0,null,null),.229),m.a.divseq(c.pick(0,1,null,null),.224),m.a.divseq(c.pick(0,2,null,null),.225),c.data},y=function(a){return new Promise((function(t,n){e.setTimeout((function(){return t()}),a)}))},x={maxWidth:f,maxHeight:f,cover:!0,crop:!0,canvas:!0,crossOrigin:"Anonymous",orientation:!0},k=function(e){return new Promise((function(a,t){o()(e,(function(e){return a(e)}),x)}))},j=function(e,a,t){var n,c,o;return r.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(a&&a.current){i.next=2;break}return i.abrupt("return");case 2:return i.next=4,r.a.awrap(k(e));case 4:if("error"!==(n=i.sent).type){i.next=7;break}throw new Error("could not load image");case 7:return(c=a.current.getContext("2d")).drawImage(n,0,0),i.next=11,r.a.awrap(y(1));case 11:o=c.getImageData(0,0,a.current.width,a.current.height),t(o);case 13:case"end":return i.stop()}}))}}).call(this,t(69))},84:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(13),o=t.n(c),i=t(11),l=t.n(i),s=t(20),u=["Dem","GOP","nonpartisan"],m=t(124),d=t(29),p=t(125),f=t(141),h=t(126),g=t(127),b=t(122),v=t(7),E=Object(b.a)({card:{width:v.c,height:v.c},item:{paddingTop:10}});function w(e){var a=e.items,t=E();return r.a.createElement(m.a,{className:t.card},r.a.createElement(p.a,{dense:!0},a.map((function(e){e.avatar;var a=e.name,n=e.percentage,c="".concat(a,"-").concat(n);return r.a.createElement(f.a,{key:c,className:t.item},r.a.createElement(h.a,{id:c,primary:a}),r.a.createElement(g.a,null,r.a.createElement(d.a,null,n,"%")))}))))}function y(e){var a=e.output;if(!a)return null;var t=function(e,a){var t=Array.from(e).map((function(e,a){return[e,a]})).sort((function(e,a){return e[0]<a[0]?-1:e[0]>a[0]?1:0})).reverse().slice(0,a),n=e.map((function(e){return Math.exp(e)})).reduce((function(e,a){return e+a}));return t.map((function(e,a,t){var r=Object(s.a)(e,2),c=r[0],o=r[1];return{breed:u[o],act:c,prob:Math.exp(c)/n}}))}(a,5).map((function(e){var a=e.breed,t=e.prob;return{name:Object(v.b)(a),percentage:(100*t).toFixed(2)}}));return r.a.createElement(w,{items:t})}var x=t(130),k=t(3),j=t(52),O=t.n(j),N=t(129),I=t(137),A=t(128),T=Object(b.a)((function(e){return{box:{width:v.c,padding:0,margin:0},content:{boxSizing:"border-box"},info:{backgroundColor:e.palette.primary.main},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}}));function W(e){var a=e.message,t=T();return r.a.createElement(I.a,{className:t.box},r.a.createElement(A.a,{className:Object(k.a)(t.info,t.content),message:r.a.createElement("span",{className:t.message},r.a.createElement(O.a,{className:Object(k.a)(t.icon,t.iconVariant)}),a)}))}function R(e){var a=e.message,t=T();return r.a.createElement(I.a,{className:t.box},r.a.createElement(A.a,{className:t.content,message:r.a.createElement("span",{className:t.message},r.a.createElement(N.a,{size:20,className:t.iconVariant}),a)}))}var S=t(54),C=t.n(S),L=t(53),P=t.n(L),D=Object(b.a)({icon:{width:"50%",height:"50%",color:"grey"}}),F=function(e){var a=e.fileLoaded,t=e.isDragActive,n=D();return a?null:t?r.a.createElement(P.a,{className:n.icon}):r.a.createElement(C.a,{className:n.icon})},q=t(56),z=Object(b.a)({card:{width:v.c,height:v.c,position:"relative",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:10},canvas:{width:v.c,height:v.c,zIndex:0,position:"absolute"},input:{zIndex:9999,position:"absolute"}});function B(e){var a=e.setFile,t=e.canvasRef,c=e.fileLoaded,o=z(),i=Object(n.useCallback)((function(e){if(e.length>1)return console.log("can only handle one file at a time");if(0!==e.length){var t=e[0];if(!t.type.startsWith("image"))return console.log("file must be an image");a(t)}}),[a]),l=Object(q.a)({onDrop:i}),s=l.getRootProps,u=l.getInputProps,d=l.isDragActive;return r.a.createElement(m.a,Object.assign({},s(),{className:o.card}),r.a.createElement("canvas",{className:o.canvas,ref:t,width:v.c,height:v.c}),r.a.createElement("input",Object.assign({alt:"Image Dropzone",type:"image",className:o.input},u())),r.a.createElement(F,{fileLoaded:c,isDragActive:d}))}var G=t(131),M=Object(v.e)(),H=Object(b.a)((function(e){return{root:{flexGrow:1}}}));function U(){var e=Object(n.useState)(!1),a=Object(s.a)(e,2),t=a[0],c=a[1],o=Object(n.useState)(!1),i=Object(s.a)(o,2),u=i[0],m=i[1],d=Object(n.useState)(null),p=Object(s.a)(d,2),f=p[0],h=p[1],g=Object(n.useRef)(null),b=Object(n.useState)(null),E=Object(s.a)(b,2),w=E[0],k=E[1];Object(n.useEffect)((function(){f&&Object(v.a)(f,g,k)}),[f]);var j=Object(n.useState)(null),O=Object(s.a)(j,2),N=O[0],I=O[1];Object(n.useEffect)((function(){t&&w&&Object(v.f)(M,w,I)}),[t,w]);var A=N&&N.values().next().value.data,T=H();return r.a.createElement("div",{className:T.root},r.a.createElement(x.a,{container:!0,spacing:3},r.a.createElement(x.a,{item:!0},r.a.createElement(B,{setFile:h,canvasRef:g,fileLoaded:!!f}),!t&&!u&&r.a.createElement(G.a,{variant:"contained",onClick:function(){return l.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u&&!t){e.next=2;break}return e.abrupt("return");case 2:return m(!0),e.next=5,l.a.awrap(Object(v.d)(M));case 5:c(!0),m(!1);case 7:case"end":return e.stop()}}))}},"Load model (86 MB)"),!t&&u&&r.a.createElement(R,{message:"Loading model..."}),t&&w&&!N&&r.a.createElement(R,{message:"Running model..."}),t&&!f&&r.a.createElement(W,{message:"Add or take a picture..."}),!!f&&!w&&r.a.createElement(R,{message:"Loading image..."})),r.a.createElement(x.a,{item:!0},r.a.createElement(y,{output:A}))))}var V=t(134),J=t(136),_=t(132),K=t(133),$=t(138),Q=t(139),X=t(135),Y=t(28),Z=t.n(Y),ee=Object(b.a)((function(e){return{root:{flexGrow:1},content:{marginTop:20},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},table:{width:"100%"},footer:{padding:e.spacing(2),marginTop:"auto"},button:{margin:e.spacing(1)}}}));var ae=function(){var e=ee();return r.a.createElement("div",{className:e.root},r.a.createElement(_.a,{position:"static"},r.a.createElement(K.a,null,r.a.createElement(d.a,{variant:"h6",className:e.title},"Image Partisanship Classifier"))),r.a.createElement(V.a,{className:e.content},r.a.createElement(U,null)),r.a.createElement(V.a,{className:e.content},r.a.createElement($.a,null,r.a.createElement(Q.a,{expandIcon:r.a.createElement(Z.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},r.a.createElement(d.a,{className:e.heading},"How do I use this?")),r.a.createElement(X.a,null,r.a.createElement(d.a,{variant:"body2"},"Tab on the image icon to take a photo and drag and drop an image file on the image icon to classify the image's partisanship. Note that (a) this is kind of silly even for Facebook ad images and (b) if you submit an image that isn't from a Facebook ad, the prediction will be meaningless."))),r.a.createElement($.a,null,r.a.createElement(Q.a,{expandIcon:r.a.createElement(Z.a,null),"aria-controls":"panel3a-content",id:"panel3a-header"},r.a.createElement(d.a,{className:e.heading},"What is this good for?")),r.a.createElement(X.a,null,r.a.createElement(d.a,{variant:"body2"},"TK"))),r.a.createElement($.a,null,r.a.createElement(Q.a,{expandIcon:r.a.createElement(Z.a,null),"aria-controls":"panel3a-content",id:"panel3a-header"},r.a.createElement(d.a,{className:e.heading},"What happens to my data?")),r.a.createElement(X.a,null,r.a.createElement(d.a,{variant:"body2"},"No image that you take with or add to this application will be uploaded or stored on my or anyone's servers by this application / website. In fact, your images never leave your device, because all the calculations are done in you browser!"))),r.a.createElement($.a,null,r.a.createElement(Q.a,{expandIcon:r.a.createElement(Z.a,null),"aria-controls":"panel3a-content",id:"panel3a-header"},r.a.createElement(d.a,{className:e.heading},"credits")),r.a.createElement(X.a,null,r.a.createElement(V.a,null,r.a.createElement(d.a,{variant:"body2"},"I borrowed this app and much of the code from [David Pfahler](https://github.com/davidpfahler). The Image partisanship bit is all me though. If you want to learn more about the app code, check out the ",r.a.createElement(J.a,{to:"https://github.com/davidpfahler/react-ml-app"},"GitHub repository"),".")))),r.a.createElement("footer",{className:e.footer})))},te=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ne(e,a){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(ae,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/react-ml-app",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var a="".concat("/react-ml-app","/service-worker.js");te?(!function(e,a){fetch(e).then((function(t){var n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ne(e,a)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(a,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ne(a,e)}))}}()}},[[63,1,2]]]);
//# sourceMappingURL=main.6589bb56.chunk.js.map